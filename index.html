<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Derivador Interactivo</title>
    <script src="https://cdn.jsdelivr.net/npm/algebrite@1.5.0/dist/algebrite.min.js"></script>
</head>
<body>
    <h1>Derivador Interactivo</h1>
    <p>Escribe tu función en x (puedes usar 3x o 2x^2, se corregirá automáticamente):</p>
    <input id="funcion" type="text" placeholder="Ej: 3x^2 + 5x">
    <button onclick="derivar()">Derivar</button>
    <pre id="resultado"></pre>

    <script>
        // Corrige automáticamente entradas como 3x → 3*x
        function corregirEntrada(f) {
            return f.replace(/(\d)(x)/g, '$1*$2');
        }

        function derivar() {
            let f = document.getElementById("funcion").value;
            f = corregirEntrada(f); // Aplica corrección
            try {
                // Deriva la función usando Algebrite
                let derivada = Algebrite.run('d(' + f + ', x)');
                document.getElementById("resultado").innerText = derivada;
            } catch (err) {
                document.getElementById("resultado").innerText = "Error: función inválida";
            }
        }
    </script>
</body>
</html>
